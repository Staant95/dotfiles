#!/bin/bash

# Create a script that check if a tmux session is running, if not start it by executing a script

SESSION_NAME="liferay-local"


tmux has-session -t $SESSION_NAME &> /dev/null

if [ $? != 0 ]
then
    tmux new-session -d -s $SESSION_NAME -n "liferay"
    # execute some script example
    tmux send-keys -t $SESSION_NAME "cd ~/dev/acsoftware/one-flex/liferay-workspace" C-m
    tmux send-keys -t $SESSION_NAME "liferay-local" C-m
    # create a new window for logs
    tmux new-window -t $SESSION_NAME:1 -n "logs"
    # create a new window for kafka
    tmux new-window -t $SESSION_NAME:2 -n "kafka"
    # create a new window for http requests
    tmux new-window -t $SESSION_NAME:3 -n "http"
    # set active window
    tmux select-window -t $SESSION_NAME:0
fi

tmux attach -t $SESSION_NAME